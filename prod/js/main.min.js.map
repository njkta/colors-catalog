{"version":3,"file":"main.min.js","sources":["main.js"],"sourcesContent":["\"use strict\";\r\n\r\nwindow.onload = function(){\r\n    let onClickBasket = () => {\r\n        let basketIconOpen = document.querySelector('.open-basket');\r\n        let basketIconClose = document.querySelector('.basket__close');\r\n        let basketCloseAll = document.querySelector('.basket__back');\r\n        let basket = document.querySelector('.basket__box');\r\n\r\n        basketIconOpen.addEventListener('click', basketOpen(basket))\r\n        basketIconClose.addEventListener('click', basketClose(basket))\r\n        basketCloseAll.addEventListener('click', basketClose(basket))\r\n    }\r\n\r\n    let basketOpen = (el) => {\r\n        return () => {\r\n            el.style.display = 'block';\r\n            document.body.classList.add('show-basket')\r\n        }\r\n\r\n    }\r\n    let basketClose = (el) => {\r\n        return () => {\r\n            el.style.display = 'none';\r\n            document.body.classList.remove('show-basket')\r\n        }\r\n    }\r\n\r\n\r\n    let btnProduct = document.querySelectorAll('.add-to-basket');\r\n    let orderList = [];\r\n    let counter = 0;\r\n    let basketList = document.querySelector('.basket-list');\r\n    let clearBasket = document.querySelector('.basket__clear');\r\n    let deleteProductBtn = '';\r\n    let countProductPlus = '';\r\n    let countProductMinus = '';\r\n\r\n    let renderBasket = () => {\r\n        if (orderList.length === 0) {\r\n            basketList.innerHTML = ''\r\n            counter = 0\r\n            counterInBasket(counter)\r\n        } else {\r\n            orderList.forEach(el => {\r\n\r\n                let idProduct = el.getAttribute('id');\r\n                let imgProduct = el.querySelector('.catalog__image_front').getAttribute('src');\r\n                let titleProduct = el.querySelector('.catalog__title').textContent;\r\n                let priceProduct = el.querySelector('.catalog__price>span').textContent;\r\n\r\n                basketList.innerHTML += `\r\n                    <div id=\"${idProduct}\" class=\"basket-list__item\">\r\n                        <div class=\"basket-list__images\">\r\n                            <img class=\"basket-list__image\" src=\"${imgProduct}\" alt=\"${titleProduct}\">\r\n                        </div>\r\n                        <div class=\"basket-list__info\">\r\n                            <div class=\"catalog__title basket-list__title\">${titleProduct}</div>\r\n                            <div class=\"catalog__price basket-list__price\"><span>${priceProduct}</span> â‚½</div>\r\n                        </div>\r\n                        <div class=\"basket-list__other\">\r\n                            <div class=\"basket-list__btn\">\r\n                                <button class=\"btn btn_small btn_minus\" type=\"button\"></button>\r\n                                <span class=\"basket-list__counter\" data-count-product=\"1\"></span>\r\n                                <button class=\"btn btn_small btn_plus\" type=\"button\"></button>\r\n                            </div>\r\n                            <div class=\"basket-list__delete\">\r\n                                <svg width=\"24\" height=\"24\">\r\n                                    <use xlink:href=\"#icon-close\"></use>\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n\r\n            })\r\n\r\n\r\n            deleteProductBtn = document.querySelectorAll('.basket-list__delete');\r\n            deleteProductBtn.forEach(el => el.addEventListener('click', deleteFromBasket(el)))\r\n\r\n            countProductPlus = document.querySelectorAll('.btn_plus');\r\n            countProductMinus = document.querySelectorAll('.btn_minus');\r\n            countProductPlus.forEach(el => el.addEventListener('click', productPlus(el)))\r\n            countProductMinus.forEach(el => el.addEventListener('click', productMinus(el)))\r\n\r\n            counter = orderList.length\r\n            counterInBasket(counter)\r\n        }\r\n\r\n    }\r\n    let addToBasket = (el) => {\r\n        return () => {\r\n            el.disabled = true\r\n            let productCardInCatalog = el.parentElement.parentElement.parentElement;\r\n\r\n            orderList.push(productCardInCatalog)\r\n            basketList.innerHTML = ''\r\n            renderBasket()\r\n        }\r\n    }\r\n\r\n    let deleteFromBasket = (el) => {\r\n        return () => {\r\n            el.parentElement.parentElement.classList.add('deleted')\r\n            counter = orderList.length - 1\r\n            counterInBasket(counter)\r\n            /*let productCardInBasketID = el.parentElement.parentElement.getAttribute('id');\r\n            let item = orderList.find(el => el.getAttribute('id') === productCardInBasketID)\r\n            let index = orderList.indexOf(item)\r\n\r\n\r\n            item.querySelector('.add-to-basket').disabled = false\r\n            orderList.splice(index, 1)\r\n\r\n            basketList.innerHTML = ''\r\n            renderBasket()*/\r\n\r\n        }\r\n    }\r\n\r\n\r\n    btnProduct.forEach(el => el.addEventListener('click', addToBasket(el)))\r\n\r\n    clearBasket.addEventListener('click', () => {\r\n        orderList = []\r\n        counterInBasket(0)\r\n        btnProduct.forEach(el => el.disabled = false)\r\n        renderBasket()\r\n    })\r\n\r\n    let productPlus = (el) => {\r\n        return () => {\r\n            let countProducts = el.previousElementSibling\r\n            let currentCount = countProducts.getAttribute('data-count-product')\r\n            currentCount++\r\n            countProducts.setAttribute('data-count-product', currentCount)\r\n        }\r\n    }\r\n    let productMinus = (el) => {\r\n        return () => {\r\n            el.disabled = false\r\n            let countProducts = el.nextElementSibling\r\n            let currentCount = countProducts.getAttribute('data-count-product')\r\n            currentCount--\r\n            countProducts.setAttribute('data-count-product', currentCount)\r\n\r\n            if (+currentCount === 0) {\r\n                el.disabled = true\r\n            }\r\n        }\r\n    }\r\n\r\n    let counterInBasket = (counter) => {\r\n        let basketCounter = document.querySelectorAll('.basket__count')\r\n        basketCounter.forEach(el => el.setAttribute('data-count', counter))\r\n    }\r\n\r\n\r\n    let setCountOfCatalog = () => {\r\n        let countAllProducts = document.querySelectorAll('.catalog__item').length\r\n        let attrCount = document.querySelector('[data-all-count]')\r\n        return attrCount.setAttribute('data-all-count', countAllProducts)\r\n    }\r\n\r\n    let filter = () => {\r\n        let filterItems = document.querySelectorAll('.filter__input')\r\n        let filterProducts = document.querySelectorAll('.catalog__item')\r\n        filterItems.forEach(el => {\r\n            el.addEventListener('click', () => {\r\n                let filterClass = el.parentElement.getAttribute('data-filter')\r\n\r\n                if (!el.checked){\r\n\r\n                }\r\n                filterProducts.forEach(elProd => {\r\n                    elProd.classList.remove(\"hide\")\r\n                    if (!elProd.classList.contains(filterClass)){\r\n                        elProd.classList.add(\"hide\")\r\n                    }\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    let catalogSortBtn = document.querySelector('.catalog-sort__item_default')\r\n    let defaultSort = catalogSortBtn.children[0]\r\n    let catalogSortModalClose = document.querySelector('.modal-sort__back')\r\n    let catalogSortItem = document.querySelectorAll('.catalog-sort__item')\r\n    let catalogItem = document.querySelectorAll('.catalog__item')\r\n    let catalogSortModal = document.querySelector('.modal-sort')\r\n    let sortValue = ''\r\n    let sortText = ''\r\n\r\n    catalogSortBtn.addEventListener('click', () => catalogSortModal.style.display = 'block')\r\n    catalogSortModalClose.addEventListener('click', () => catalogSortModal.style.display = 'none')\r\n    catalogSortItem.forEach(el => {\r\n        el.addEventListener('click', () => {\r\n            sortValue = el.getAttribute('data-sort')\r\n            sortText = el.textContent\r\n            defaultSort.innerHTML = sortText\r\n            catalogSortModal.style.display = 'none';\r\n\r\n            sort(catalogItem, sortValue)\r\n\r\n        })\r\n    })\r\n\r\n    let sort = (elCollection, sortBy) => {\r\n        let elArr = Array.from(elCollection)\r\n        let prices = []\r\n\r\n        let sortLow = () => {\r\n            elArr.forEach((el, index) => {\r\n                let price = el.querySelector('.catalog__price').children[0].textContent\r\n\r\n                prices.push.apply(prices,[[el.id, price]])\r\n                prices.sort()\r\n            })\r\n\r\n\r\n        }\r\n\r\n        switch (sortBy) {\r\n            case 'high':\r\n\r\n                // sortHigh(el);\r\n                break;\r\n            case 'low':\r\n                sortLow();\r\n                break;\r\n            case 'popular':\r\n\r\n                // sortPopular(el);\r\n                break;\r\n            case 'new':\r\n\r\n                // sortNew(el);\r\n                break;\r\n            default: sortLow(el);\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    onClickBasket();\r\n    setCountOfCatalog();\r\n    filter();\r\n}\r\n\r\n"],"names":["window","onload","let","basketClose","el","style","display","document","body","classList","remove","btnProduct","querySelectorAll","orderList","counter","basketList","querySelector","clearBasket","deleteProductBtn","countProductPlus","countProductMinus","renderBasket","length","innerHTML","forEach","idProduct","getAttribute","imgProduct","titleProduct","textContent","priceProduct","addEventListener","deleteFromBasket","productPlus","productMinus","counterInBasket","parentElement","add","disabled","productCardInCatalog","push","countProducts","previousElementSibling","currentCount","setAttribute","nextElementSibling","basketCounter","catalogSortBtn","defaultSort","children","catalogSortModalClose","catalogSortItem","catalogItem","catalogSortModal","sortValue","sortText","sort","elCollection","sortBy","elArr","Array","from","prices","sortLow","index","price","apply","id","onClickBasket","basketIconOpen","basketIconClose","basketCloseAll","basket","setCountOfCatalog","countAllProducts","attrCount","filter","filterItems","filterProducts","filterClass","checked","elProd","contains"],"mappings":"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"}